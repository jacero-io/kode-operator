graph TD
    A[User] -->|Creates/Manages| B[Kode CR]
    A[User] -->|Creates/Manages| C[EntryPoint CR]
    A[User] -->|Creates/Manages| D[ContainerTemplate CR]
    A[User] -->|Creates/Manages| E[VirtualTemplate CR]
    A[User] -->|Creates/Manages| F[ClusterContainerTemplate CR]
    A[User] -->|Creates/Manages| G[ClusterVirtualTemplate CR]

    subgraph "Kode Operator"
        H[Kode Controller] -->|Watches| B
        I[EntryPoint Controller] -->|Watches| C
        J[Template Manager] -->|Fetches| D
        J[Template Manager] -->|Fetches| E
        J[Template Manager] -->|Fetches| F
        J[Template Manager] -->|Fetches| G
        K[Resource Manager] -->|Creates/Updates/Deletes| L[Managed Resources]
        M[Cleanup Manager] -->|Initiates Cleanup| L[Managed Resources]
        N[Validator] -->|Validates| L[Managed Resources]
        O[Event Manager] -->|Records Events| P[Kubernetes Events]

        H[Kode Controller] -->|Uses| J
        H[Kode Controller] -->|Uses| K
        H[Kode Controller] -->|Uses| M
        H[Kode Controller] -->|Uses| N
        H[Kode Controller] -->|Uses| O

        I[EntryPoint Controller] -->|Uses| J
        I[EntryPoint Controller] -->|Uses| K
        I[EntryPoint Controller] -->|Uses| M
        I[EntryPoint Controller] -->|Uses| N
        I[EntryPoint Controller] -->|Uses| O
    end

    subgraph "Kubernetes Resources"
        2[StatefulSet]
        3[Service]
        4[PersistentVolumeClaim]
        5[Secret]
        6[Gateway]
        7[HTTPRoute]
        8[SecurityPolicy]

        L --->|Manages| 2
        L --->|Manages| 3
        L --->|Manages| 4
        L --->|Manages| 5
        L --->|Manages| 6
        L --->|Manages| 7
        L --->|Manages| 8
    end

    subgraph "Envoy Gateway"
        Q[Envoy Gateway] -->|Implements| 6
        Q[Envoy Gateway] -->|Implements| 7
        Q[Envoy Gateway] -->|Implements| 8
    end